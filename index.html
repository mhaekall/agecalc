<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Usia Modern</title>
    
    <!-- CSS Dependencies -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    
    <!-- JavaScript Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    
    <style>
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Custom Properties */
        :root {
            --bg-light: #ffffff;
            --bg-dark: #000000;
            --container-bg-light: #ffffff;
            --container-bg-dark: #000000;
            --text-light: #333333;
            --text-dark: #ffffff;
            --accent-color: #ff6b6b;
            --border-radius-lg: 20px;
            --border-radius-md: 12px;
            --border-radius-sm: 8px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition-default: all 0.5s ease;
        }

        /* Body Styles */
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-light);
            color: var(--text-light);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 20px;
            transition: var(--transition-default);
            position: relative;
        }

        body.dark-mode {
    background: var(--bg-dark);
    color: var(--text-dark);
}
    #birthHijri {
    font-size: 1.2em; /* Sesuaikan ukuran ini sesuai kebutuhan */
}
    .flatpickr-input, #birthHijri {
    font-size: 1.2em; /* Atau ukuran lainnya yang Anda inginkan */
}
   
   /* Untuk input Hijriah di tema terang */
#birthHijri {
    width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: var(--border-radius-sm);
            font-size: 16px;
            background: #ffffff;
            transition: var(--transition-default);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }
    #birthHijri.dark-mode {
            background: #000000;
            border-color: #444;
            color: #ecf0f1;
    }

#birthHijri:focus {
    border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.15);
            outline: none;
        }

/* Untuk label Hijriah di tema terang */
label[for="birthHijri"] {
   display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #34495e;
            font-size: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: var(--transition-default);
        }
    label[for="birthHijri"].dark-mode {
            color: #bdc3c7;
        }

/* Tema Gelap untuk input Hijriah */
body.dark-mode #birthHijri {
    background: var(--input-bg-dark);
    border-color: var(--input-border-dark);
    color: var(--text-dark);
}

body.dark-mode #birthHijri:focus {
    border-color: var(--accent-color-dark);
}

/* Tema Gelap untuk label Hijriah */
body.dark-mode label[for="birthHijri"] {
    color: var(--text-dark);
}
    

        /* Theme Toggle Switch */
        .theme-toggle-wrapper {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .theme-toggle {
            width: 60px;
            height: 60px;
            background: #ffffff;
            border-radius: 100%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: var(--transition-default);
            border: none;
            position: relative;
            overflow: hidden;
        }

        .theme-toggle::before {
    content: '';
    position: absolute;
    width: 30px;
    height: 30px;
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='5'%3E%3C/circle%3E%3Cline x1='12' y1='1' x2='12' y2='3'%3E%3C/line%3E%3Cline x1='12' y1='21' x2='12' y2='23'%3E%3C/line%3E%3Cline x1='4.22' y1='4.22' x2='5.64' y2='5.64'%3E%3C/line%3E%3Cline x1='18.36' y1='18.36' x2='19.78' y2='19.78'%3E%3C/line%3E%3Cline x1='1' y1='12' x2='3' y2='12'%3E%3C/line%3E%3Cline x1='21' y1='12' x2='23' y2='12'%3E%3C/line%3E%3Cline x1='4.22' y1='19.78' x2='5.64' y2='18.36'%3E%3C/line%3E%3Cline x1='18.36' y1='5.64' x2='19.78' y2='4.22'%3E%3C/line%3E%3C/svg%3E") no-repeat center;
    transition: var(--transition-default);
    transform: scale(1);
}

.theme-toggle.dark-mode::before {
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z'%3E%3C/path%3E%3C/svg%3E") no-repeat center;
    transform: scale(1) rotate(360deg); 
}

        .theme-toggle.dark-mode {
            background: #000000;
        }

        /* Container Styles */
        .calculator-container {
            background: var(--container-bg-light);
            color: var(--text-light);
            padding: 40px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow);
            max-width: 550px;
            width: 100%;
            transition: var(--transition-default);
            position: relative;
        }

        .calculator-container.dark-mode {
            background: var(--container-bg-dark);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        /* Header Styles */
        h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 35px;
            font-size: 32px;
            font-weight: 700;
            position: relative;
            transition: var(--transition-default);
        }

        h2.dark-mode {
            color: #ecf0f1;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background: var(--accent-color);
            border-radius: 2px;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 30px;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #34495e;
            font-size: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: var(--transition-default);
        }

        label.dark-mode {
            color: #bdc3c7;
        }

        .flatpickr-input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: var(--border-radius-sm);
            font-size: 16px;
            background: #ffffff;
            transition: var(--transition-default);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        .flatpickr-input.dark-mode {
            background: #000000;
            border-color: #444;
            color: #ecf0f1;
        }

        .flatpickr-input:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.15);
            outline: none;
        }

        /* Calculate Button */
        .calculate-btn {
            background: var(--accent-color);
            color: white;
            padding: 15px 35px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            width: 100%;
            transition: var(--transition-default);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .calculate-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }

        .calculate-btn:active {
            transform: translateY(0);
        }

        /* Result Styles */
        #result {
            margin-top: 30px;
            padding: 25px;
            border-radius: var(--border-radius-md);
            background: #f8f9fa;
            display: none;
            animation: fadeIn 0.5s ease forwards;
            border-left: 5px solid var(--accent-color);
            transition: var(--transition-default);
        }

        #result.dark-mode {
            background: #121212;
            color: #ecf0f1;
        }

        /* Error Styles */
        .error {
            color: var(--accent-color);
            margin-top: 10px;
            font-size: 14px;
            background: rgba(255, 107, 107, 0.1);
            padding: 8px 15px;
            border-radius: var(--border-radius-sm);
            display: inline-block;
            font-weight: 500;
            transition: var(--transition-default);
        }

        .error.dark-mode {
            color: #ff9f9f;
            background: rgba(255, 107, 107, 0.05);
        }

        /* Loading Spinner */
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--accent-color);
            border-radius: 50%;
            width: 35px;
            height: 35px;
            animation: spin 1s linear infinite;
            display: none;
            margin: 20px auto;
        }

        /* Animations */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 576px) {
            .calculator-container {
                padding: 25px;
                margin: 15px;
            }
            
            h2 {
                font-size: 26px;
            }
            
            .flatpickr-input {
                padding: 12px 15px;
            }
            
            .calculate-btn {
                padding: 12px 25px;
                font-size: 16px;
            }

            .theme-toggle-wrapper {
                top: 10px;
                right: 10px;
            }

            .theme-toggle {
                width: 50px;
                height: 50px;
            }
          /* Zodiac Card Styles */
.zodiac-card {
    margin-top: 20px;
    padding: 20px;
    border-radius: var(--border-radius-md);
    background: linear-gradient(145deg, #ffffff, #f0f0f0);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    transition: var(--transition-default);
}

.zodiac-card.dark-mode {
    background: linear-gradient(145deg, #080808, #000000);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.zodiac-symbol {
    font-size: 2.5em;
    text-align: center;
    margin-bottom: 10px;
}

.zodiac-info {
    margin-bottom: 15px;
}

.zodiac-info h4 {
    color: var(--accent-color);
    margin-bottom: 8px;
    font-size: 1.1em;
}

.zodiac-info p {
    margin: 5px 0;
    line-height: 1.6;
}

.zodiac-element {
    display: inline-block;
    padding: 5px 15px;
    border-radius: 20px;
    color: white;
    font-size: 0.9em;
    margin-top: 10px;
}

/* Share Button Styles */
.share-button {
    background: #4CAF50;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-top: 15px;
    transition: all 0.3s ease;
}

.share-button:hover {
    background: #45a049;
    transform: translateY(-2px);
}

.share-button svg {
    width: 18px;
    height: 18px;
}
            /* Sharing Overlay Styles */
.sharing-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    opacity: 1;
    transition: opacity 0.3s ease;
}

.sharing-overlay.fade-out {
    opacity: 0;
}

.sharing-loader {
    text-align: center;
    color: white;
    padding: 20px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
}

.sharing-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: #fff;
    animation: spin 1s ease-in-out infinite;
    margin: 0 auto 15px;
}

.sharing-message {
    font-size: 16px;
    font-weight: 500;
}

/* Enhanced Toast Styles */
.toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 12px 24px;
    border-radius: 50px;
    font-size: 14px;
    z-index: 10000;
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.toast.show {
    transform: translateX(-50%) translateY(0);
}

.toast.hide {
    transform: translateX(-50%) translateY(100px);
}

.toast-content {
    display: flex;
    align-items: center;
    gap: 8px;
}

.toast-icon {
    font-size: 18px;
}

/* Animations */
@keyframes spin {
    to { transform: rotate(360deg); }
}

@keyframes slideUp {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
}

@keyframes fadeOut {
    to { opacity: 0; }
}

/* Toast Notification */
.toast {
    position: fixed;
    bottom: -100px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 12px 24px;
    border-radius: 25px;
    font-size: 0.9em;
    z-index: 1000;
    transition: all 0.3s ease;
}

.toast.show {
    bottom: 20px;
}

/* Additional Responsive Styles */
@media (max-width: 576px) {
    .zodiac-card {
        padding: 15px;
    }

    .zodiac-symbol {
        font-size: 2em;
    }

    .share-button {
        width: 100%;
    }
}
            /* Birthday Countdown Styles */
.birthday-countdown {
    transition: var(--transition-default);
    animation: fadeIn 0.5s ease forwards;
}

.birthday-countdown h4 {
    font-size: 1.2em;
    font-weight: 600;
    letter-spacing: 0.5px;
}

.birthday-countdown p {
    margin: 0;
    line-height: 1.6;
}

.birthday-countdown.dark-mode {
    background: #121212;
    color: #ecf0f1;
}
            .result-item {
    display: flex;
    align-items: center; /* Pusatkan secara vertikal */
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: ${isDarkMode ? '#121212' : '#f8f9fa'};
    border-radius: 6px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    width: 100%;
    text-align: center;
    justify-content: center; /* Pusatkan secara horizontal */
}
            .result-label {
    font-weight: 600;
    color: ${isDarkMode ? '#ecf0f1' : '#2c3e50'};
}

.result-value {
    font-weight: 700;
}


@media (max-width: 576px) {
    .result-item {
        margin-bottom: 0.5rem;
        font-size: 1em; /* Sesuaikan ukuran font untuk layar kecil */
    }
}

.social-links {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
}

.instagram-link {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
    color: white;
    text-decoration: none;
    border-radius: 25px;
    font-weight: 500;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.instagram-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.instagram-link svg {
    width: 24px;
    height: 24px;
    stroke: white;
}

.instagram-link span {
    font-size: 14px;
}

/* Responsive Design for Footer */
@media (max-width: 576px) {
    
    
    .instagram-link {
        padding: 8px 15px;
    }
    
    .instagram-link span {
        font-size: 12px;
    }
    
    
}
.result-actions {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px; /* Jarak antara tombol dan ikon Instagram */
    margin-top: 19px; /* Margin atas untuk penempatan */
}

.share-button {
    background: #4CAF50;
    color: white;
    padding: 10px;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.share-button:hover {
    background: #45a049;
    transform: translateY(-2px);
}

.share-button svg {
    width: 18px;
    height: 18px;
}

.instagram-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
    border-radius: 50%;
    color: white;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.instagram-icon:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.instagram-icon svg {
    width: 24px;
    height: 24px;
    stroke: white;
}            
        }
    </style>
</head>
<body>
    <div class="theme-toggle-wrapper">
        <button class="theme-toggle" onclick="toggleDarkMode()" aria-label="Toggle dark mode"></button>
    </div>

    <div class="calculator-container">
        <h2>agecalc</h2>
        
        <div class="form-group">
            <label for="birthdate">Tanggal Lahir</label>
            <input type="text" id="birthdate" placeholder="Pilih tanggal lahir Anda">
            <div id="error" class="error"></div>
            
    <label for="birthHijri">Tanggal Lahir (Hijriah)</label>
    <input type="text" id="birthHijri" readonly placeholder="Tanggal Hijriah muncul di sini">
    <div id="error" class="error"></div>
</div>
    
        <button class="calculate-btn" onclick="calculateAge()">Hitung Usia</button>
        <div id="loading" class="loading-spinner"></div>
        <div id="result"></div>
        
    </div>

    <script>
        // Flatpickr Initialization with original setup
        document.addEventListener('DOMContentLoaded', function() {
            flatpickr("#birthdate", {
                dateFormat: "Y-m-d",
                maxDate: "today",
                locale: {
                    firstDayOfWeek: 1
                }
            });
        });
// Event listener untuk input tanggal lahir
document.getElementById("birthdate").addEventListener("change", function () {
    const selectedDate = luxon.DateTime.fromISO(this.value);
    convertToHijri(selectedDate).then(hijriDate => {
        document.getElementById("birthHijri").value = hijriDate;
    });
});

        // Dark Mode Management with smooth transition
        let isDarkMode = false;

        function toggleDarkMode() {
    isDarkMode = !isDarkMode;
    
    // Update body class
    document.body.classList.toggle('dark-mode');
    
    // Get all elements that need dark mode
    const elementsToToggle = document.querySelectorAll(
        '.calculator-container, h2, label, .flatpickr-input, ' +
        '.theme-toggle, #result, .error, .zodiac-card, ' +
        '.flatpickr-calendar, .flatpickr-months, .flatpickr-weekdays, ' +
        '.flatpickr-day'
    );
    
    // Toggle dark mode class on all elements
    elementsToToggle.forEach(element => {
        if (element) {
            element.classList.toggle('dark-mode');
        }
    });
    
    // Store preference
    localStorage.setItem('darkMode', isDarkMode);
}

// Add this to initialize dark mode based on saved preference
document.addEventListener('DOMContentLoaded', function() {
    const savedDarkMode = localStorage.getItem('darkMode') === 'true';
    if (savedDarkMode) {
        toggleDarkMode();
    }
});

        // Confetti Animation
        function showConfetti() {
            confetti({
                particleCount: 150,
                spread: 80,
                origin: { y: 0.6 },
                colors: ['#ff6b6b', '#feca57', '#74ebd5'],
                startVelocity: 30,
                gravity: 0.8,
                scalar: 0.9
            });
        }

        // Click Sound Effect
        function playClickSound() {
            const audio = new Audio('https://www.myinstants.com/media/sounds/button-16.mp3');
            audio.volume = 0.5;
            audio.play().catch(e => console.log("Audio play failed:", e));
        }
    // Fungsi untuk mengkonversi tanggal Gregorian ke Hijriah menggunakan Aladhan API
async function convertToHijri(gregorianDate) {
    const year = gregorianDate.year;
    const month = gregorianDate.month;
    const day = gregorianDate.day;

    try {
        const response = await fetch(`https://api.aladhan.com/v1/gToH?date=${day}-${month}-${year}`);
        const data = await response.json();
        const hijri = data.data.hijri;
        return `${hijri.day} ${hijri.month.en} ${hijri.year} H`;
    } catch (error) {
        console.error("Error fetching Hijri date:", error);
        return "Periksa koneksi internet Anda.";
    }
}

        // Age Calculation
        // Modifikasi fungsi calculateAge
function calculateAge() {
    const birthdateInput = document.getElementById("birthdate").value;
    const errorDiv = document.getElementById("error");
    const resultDiv = document.getElementById("result");
    const loadingSpinner = document.getElementById("loading");

    // Reset states
    errorDiv.textContent = "";
    resultDiv.style.display = "none";
    loadingSpinner.style.display = "block";

    setTimeout(() => {
        try {
            if (!birthdateInput) {
                throw new Error("Silakan pilih tanggal lahir Anda.");
            }

            const birthDate = luxon.DateTime.fromISO(birthdateInput);
            const now = luxon.DateTime.now();

            if (!birthDate.isValid) {
                throw new Error("Format tanggal lahir tidak valid.");
            }

            if (birthDate > now) {
                throw new Error("Tanggal lahir tidak boleh di masa depan.");
            }

            const ageInYears = now.diff(birthDate, 'years').years;
            if (ageInYears < 0) {
                throw new Error("Usia minimal harus 1 tahun.");
            }

            // Calculate age
            const diff = now.diff(birthDate, ["years", "months", "days"]);
            const years = Math.floor(diff.years);
            const months = Math.floor(diff.months);
            const days = Math.floor(diff.days);

            // Get zodiac information
            const zodiacInfo = getZodiacSign(birthDate.month, birthDate.day);
            const zodiacCharacteristics = getZodiacCharacteristics(zodiacInfo[0]);
            const elementColor = getZodiacColor(zodiacInfo[3]);
            const birthYear = birthDate.year;
            const chineseZodiacInfo = getChineseZodiac(birthYear);
            const chineseElementColor = getChineseElementColor(chineseZodiacInfo[3]);
                // Tambahkan setelah perhitungan zodiak
const timeToNextBirthday = calculateTimeToNextBirthday(birthDate);
const birthdayCountdownMessage = formatTimeToNextBirthday(timeToNextBirthday.months, timeToNextBirthday.days);

            // Create result HTML
            resultDiv.innerHTML = `
               
     <div style="text-align: center; padding: 10px;">
        <h3 style="font-size: 1.05em; line-height: 1.6; color: ${isDarkMode ? '#ff9f9f' : '#ff6b6b'}">
            <strong>Selamat!</strong><br>
        </h3>
        <div style="font-size: 0.85em; line-height: 1.38;">
            <strong>Sekarang usia kamu:</strong><br>
            <div style="display: flex; flex-direction: column; margin-top: 10px;">
                <div class="result-item" style="background: ${isDarkMode ? 'dark-mode' : ''}">
                    <span id="years" style="color: ${isDarkMode ? '#ff9f9f' : '#ff6b6b'}; margin-right: 0.5rem;">-</span> Tahun
                </div>
                <div class="result-item" style="background: ${isDarkMode ? 'dark-mode' : ''}">
                    <span id="months" style="color: ${isDarkMode ? '#ff9f9f' : '#ff6b6b'}; margin-right: 0.5rem;">-</span> Bulan
                </div>
                <div class="result-item" style="background: ${isDarkMode ? 'dark-mode' : ''}">
                    <span id="days" style="color: ${isDarkMode ? '#ff9f9f' : '#ff6b6b'}; margin-right: 0.5rem;">-</span> Hari
                </div>
            </div>
            <div style="font-size: 1.1em; margin-top: 10px;">
                <strong>Tanggal Lahir (Hijriah):</strong><br>
                <span style="color: ${isDarkMode ? '#ff9f9f' : '#ff6b6b'}">
                    ${document.getElementById("birthHijri").value}
                </span>
            </div>
        </div>
    </div>

    <div style="text-align: center; padding: 10px; margin-top: 20px;">
        <div style="font-size: 0.85em; line-height: 1.38;">
            <strong>Ulang Tahun Berikutnya:</strong><br>
            <div style="display: flex; flex-direction: column; margin-top: 10px;">
                <div class="result-item" style="background: ${isDarkMode ? 'dark-mode' : ''}">
                    <span style="color: ${isDarkMode ? '#ff9f9f' : '#ff6b6b'}; margin-right: 0.5rem;">${timeToNextBirthday.months}</span> Bulan
                </div>
                <div class="result-item" style="background: ${isDarkMode ? 'dark-mode' : ''}">
                    <span style="color: ${isDarkMode ? '#ff9f9f' : '#ff6b6b'}; margin-right: 0.5rem;">${timeToNextBirthday.days}</span> Hari
                </div>
            </div>
        </div>
    </div>


    <div class="zodiac-card ${isDarkMode ? 'dark-mode' : ''}">
        <div class="zodiac-symbol" style="color: ${elementColor}">${zodiacInfo[1]}</div>
        <div class="zodiac-info">
            <h4>Zodiak: ${zodiacInfo[0]}</h4>
            <p><strong>Tanggal:</strong> ${zodiacInfo[2]}</p>
            <p><strong>Elemen:</strong> ${zodiacInfo[3]}</p>
            <p><strong>Kepribadian:</strong> ${zodiacCharacteristics.personality}</p>
            <p><strong>Kekuatan:</strong> ${zodiacCharacteristics.strengths}</p>
            <p><strong>Kelemahan:</strong> ${zodiacCharacteristics.weaknesses}</p>
            <p><strong>Kecocokan:</strong> ${zodiacCharacteristics.compatibility}</p>
        </div>
        <div class="zodiac-element" style="background-color: ${elementColor}">
            ${zodiacInfo[3]}
        </div>
    </div>

    <div class="zodiac-card ${isDarkMode ? 'dark-mode' : ''}" style="margin-top: 20px;">
        <div class="zodiac-symbol" style="color: ${chineseElementColor}; font-size: 3em;">
            ${chineseZodiacInfo[1]}
        </div>
        <div class="zodiac-info">
            <h4>Shio: ${chineseZodiacInfo[0]}</h4>
            <p><strong>Karakteristik:</strong> ${chineseZodiacInfo[2]}</p>
            <p><strong>Elemen:</strong> ${chineseZodiacInfo[3]}</p>
            <p><strong>Kepribadian:</strong> ${chineseZodiacInfo[4].personality}</p>
            <p><strong>Kekuatan:</strong> ${chineseZodiacInfo[4].strengths}</p>
            <p><strong>Kelemahan:</strong> ${chineseZodiacInfo[4].weaknesses}</p>
            <p><strong>Angka Keberuntungan:</strong> ${chineseZodiacInfo[4].luckyNumbers}</p>
            <p><strong>Warna Keberuntungan:</strong> ${chineseZodiacInfo[4].luckyColors}</p>
            <p><strong>Arah Keberuntungan:</strong> ${chineseZodiacInfo[4].luckyDirections}</p>
        </div>
        <div class="zodiac-element" style="background-color: ${chineseElementColor}">
            ${chineseZodiacInfo[3]}
        </div>
    </div>
                
<div class="result-actions">
    <button onclick="shareResult()" class="share-button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
            <polyline points="16 6 12 2 8 6"></polyline>
            <line x1="12" y1="2" x2="12" y2="15"></line>
        </svg>
    </button>
    <a href="https://www.instagram.com/mhaekalll_" target="_blank" class="instagram-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
        </svg>
    </a>
</div>
`;

            // Show result and hide loading
            resultDiv.style.display = "block";
            loadingSpinner.style.display = "none";

            // Update result elements with animation
            updateResultWithAnimation('years', years);
            updateResultWithAnimation('months', months);
            updateResultWithAnimation('days', days);

            // Animasi smooth scroll ke hasil
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });

        } catch (error) {
            errorDiv.textContent = error.message;
            loadingSpinner.style.display = "none";
        }
    }, 1000); // Simulasi loading selama 1 detik
}

// Tambahkan event listener untuk dark mode toggle
document.getElementById('darkModeToggle').addEventListener('change', function() {
    const zodiacCard = document.querySelector('.zodiac-card');
    if (zodiacCard) {
        zodiacCard.classList.toggle('dark-mode');
    }
});

// Event listener untuk reset form
document.getElementById('resetButton').addEventListener('click', function() {
    document.getElementById('birthdate').value = '';
    document.getElementById('error').textContent = '';
    document.getElementById('result').style.display = 'none';
    document.getElementById('loading').style.display = 'none';
});

// Inisialisasi tooltips
const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
const tooltipList = tooltipTriggerList.map(function(tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl);
});
    function updateResultWithAnimation(elementId, value) {
    const element = document.getElementById(elementId);
    const duration = 1000; // Durasi animasi dalam milidetik
    const steps = 20; // Jumlah langkah dalam animasi
    const stepDuration = duration / steps;
    let currentStep = 0;
    
    const startValue = 0;
    const increment = value / steps;

    const animation = setInterval(() => {
        currentStep++;
        const currentValue = Math.floor(startValue + (increment * currentStep));
        element.textContent = currentValue.toLocaleString();

        if (currentStep >= steps) {
            clearInterval(animation);
            element.textContent = value.toLocaleString();
        }
    }, stepDuration);
}

// Fungsi untuk memformat tanggal ke format Indonesia
function formatDateIndonesia(date) {
    const months = [
        'Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni',
        'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'
    ];
    
    return `${date.day} ${months[date.month - 1]} ${date.year}`;
}

        // Additional utility function for smooth scrolling to result
        function scrollToResult() {
            const resultDiv = document.getElementById("result");
            if (resultDiv && resultDiv.style.display !== "none") {
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        // Event listener for preventing form submission on enter key
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                calculateAge();
            }
        });

        // Initialize any tooltips or popovers if needed
        document.addEventListener('DOMContentLoaded', function() {
            // Add any additional initialization code here
            // For example, you could add tooltip initialization:
            // const tooltips = document.querySelectorAll('[data-tooltip]');
            // tooltips.forEach(tooltip => new Tooltip(tooltip));
        });
  // Tambahkan fungsi-fungsi berikut di dalam tag <script> sebelum penutup </body>

// Fungsi untuk menentukan zodiak berdasarkan tanggal lahir
function getZodiacSign(month, day) {
    if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return ["Aries", "♈", "21 Maret - 19 April", "Api"];
    if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return ["Taurus", "♉", "20 April - 20 Mei", "Tanah"];
    if ((month === 5 && day >= 21) || (month === 6 && day <= 20)) return ["Gemini", "♊", "21 Mei - 20 Juni", "Udara"];
    if ((month === 6 && day >= 21) || (month === 7 && day <= 22)) return ["Cancer", "♋", "21 Juni - 22 Juli", "Air"];
    if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return ["Leo", "♌", "23 Juli - 22 Agustus", "Api"];
    if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return ["Virgo", "♍", "23 Agustus - 22 September", "Tanah"];
    if ((month === 9 && day >= 23) || (month === 10 && day <= 22)) return ["Libra", "♎", "23 September - 22 Oktober", "Udara"];
    if ((month === 10 && day >= 23) || (month === 11 && day <= 21)) return ["Scorpio", "♏", "23 Oktober - 21 November", "Air"];
    if ((month === 11 && day >= 22) || (month === 12 && day <= 21)) return ["Sagittarius", "♐", "22 November - 21 Desember", "Api"];
    if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return ["Capricorn", "♑", "22 Desember - 19 Januari", "Tanah"];
    if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return ["Aquarius", "♒", "20 Januari - 18 Februari", "Udara"];
    return ["Pisces", "♓", "19 Februari - 20 Maret", "Air"];
}

// Fungsi untuk mendapatkan karakteristik zodiak
function getZodiacCharacteristics(zodiacSign) {
    const characteristics = {
        "Aries": {
            personality: "Berani, energetik, dan optimis",
            strengths: "Kepemimpinan, semangat tinggi, percaya diri",
            weaknesses: "Tidak sabaran, impulsif, temperamental",
            compatibility: "Leo, Sagittarius, Gemini"
        },
        "Taurus": {
                        personality: "Setia, sabar, dan praktis",
            strengths: "Dapat diandalkan, tekun, bertanggung jawab",
            weaknesses: "Keras kepala, posesif, materialistis",
            compatibility: "Virgo, Capricorn, Cancer"
        },
        "Gemini": {
            personality: "Adaptif, komunikatif, dan cerdas",
            strengths: "Versatile, cepat belajar, ramah",
            weaknesses: "Tidak konsisten, gugup, tidak dapat diprediksi",
            compatibility: "Libra, Aquarius, Aries"
        },
        "Cancer": {
            personality: "Intuitif, emosional, dan protektif",
            strengths: "Imajinatif, loyal, simpatik",
            weaknesses: "Moody, pesimistis, manipulatif",
            compatibility: "Scorpio, Pisces, Taurus"
        },
        "Leo": {
            personality: "Kreatif, ramah, dan murah hati",
            strengths: "Karismatik, hangat, humoris",
            weaknesses: "Arogan, keras kepala, malas",
            compatibility: "Aries, Sagittarius, Gemini"
        },
        "Virgo": {
            personality: "Analitis, pekerja keras, dan perfeksionis",
            strengths: "Teliti, dapat diandalkan, cerdas",
            weaknesses: "Terlalu kritis, khawatir berlebihan, sulit puas",
            compatibility: "Taurus, Capricorn, Cancer"
        },
        "Libra": {
            personality: "Diplomatis, artistik, dan seimbang",
            strengths: "Kooperatif, adil, sosial",
            weaknesses: "Ragu-ragu, menghindari konfrontasi, membawa dendam",
            compatibility: "Gemini, Aquarius, Leo"
        },
        "Scorpio": {
            personality: "Penuh gairah, teguh, dan berani",
            strengths: "Tekad kuat, intuitif, pemberani",
            weaknesses: "Cemburu, obsesif, manipulatif",
            compatibility: "Cancer, Pisces, Virgo"
        },
        "Sagittarius": {
            personality: "Optimis, petualang, dan antusias",
            strengths: "Jujur, idealis, humoris",
            weaknesses: "Tidak taktikal, tidak sabaran, membuat janji berlebihan",
            compatibility: "Aries, Leo, Libra"
        },
        "Capricorn": {
            personality: "Bertanggung jawab, disiplin, dan kontrol diri",
            strengths: "Tanggung jawab, manajemen yang baik, tekun",
            weaknesses: "Tahu segalanya, tidak mengampuni, mengharapkan yang terburuk",
            compatibility: "Taurus, Virgo, Pisces"
        },
        "Aquarius": {
            personality: "Progresif, orisinal, dan independen",
            strengths: "Progresif, orisinal, humanis",
            weaknesses: "Berlawanan, temperamental, tidak berkompromi",
            compatibility: "Gemini, Libra, Sagittarius"
        },
        "Pisces": {
            personality: "Intuitif, artistik, dan bijaksana",
            strengths: "Kompasif, artistik, intuitif",
            weaknesses: "Ingin melarikan diri dari realitas, terlalu sensitif, pesimis",
            compatibility: "Cancer, Scorpio, Capricorn"
        }
    };
    return characteristics[zodiacSign];
}

// Fungsi untuk mendapatkan warna berdasarkan elemen zodiak
function getZodiacColor(element) {
    const elementColors = {
        "Api": "#FF5733",
        "Tanah": "#8B4513",
        "Udara": "#87CEEB",
        "Air": "#1E90FF"
    };
    return elementColors[element];
}
    // Fungsi untuk mendapatkan Shio berdasarkan tahun lahir
function getChineseZodiac(year) {
    // Menentukan elemen berdasarkan siklus 10 Heavenly Stems
    const heavenlyStems = {
        0: "Logam", // Geng
        1: "Logam", // Xin
        2: "Air",   // Ren
        3: "Air",   // Gui
        4: "Kayu",  // Jia
        5: "Kayu",  // Yi
        6: "Api",   // Bing
        7: "Api",   // Ding
        8: "Tanah", // Wu
        9: "Tanah"  // Ji
    };

    // Mendapatkan elemen berdasarkan tahun
    const stemCycle = (year - 1 + 1) % 10;
    const element = heavenlyStems[stemCycle];

    const zodiacAnimals = {
        0: ["Monyet", "🐒", "Cerdik, lincah, dan penuh kreativitas"],
        1: ["Ayam", "🐔", "Pekerja keras, jujur, dan berani"],
        2: ["Anjing", "🐕", "Setia, jujur, dan dapat diandalkan"],
        3: ["Babi", "🐷", "Jujur, toleran, dan pekerja keras"],
        4: ["Tikus", "🐀", "Cerdik, adaptif, dan gesit"],
        5: ["Kerbau", "🐂", "Jujur, sabar, dan inspiratif"],
        6: ["Macan", "🐅", "Berani, kompetitif, dan percaya diri"],
        7: ["Kelinci", "🐇", "Anggun, baik hati, dan bijaksana"],
        8: ["Naga", "🐲", "Kuat, beruntung, dan berpengaruh"],
        9: ["Ular", "🐍", "Bijaksana, misterius, dan menawan"],
        10: ["Kuda", "🐎", "Energik, independen, dan bersemangat"],
        11: ["Kambing", "🐐", "Lembut, artistik, dan kreatif"]
    };

    const zodiacYear = (year - 1 + 1) % 12;
    const animalInfo = zodiacAnimals[zodiacYear];

    // Karakteristik berdasarkan kombinasi hewan dan elemen
    const characteristics = {
        personality: `${element} ${animalInfo[0]}: ${getElementalPersonality(element, animalInfo[0])}`,
        strengths: getElementalStrengths(element, animalInfo[0]),
        weaknesses: getElementalWeaknesses(element, animalInfo[0]),
        luckyNumbers: getLuckyNumbers(element),
        luckyColors: getElementColors(element),
        luckyDirections: getLuckyDirections(element)
    };

    return [animalInfo[0], animalInfo[1], animalInfo[2], element, characteristics];
}

// Fungsi helper untuk mendapatkan karakteristik berdasarkan kombinasi elemen
function getElementalPersonality(element, animal) {
    const elementTraits = {
        "Logam": "tegas, mandiri, dan perfeksionis",
        "Air": "adaptif, fleksibel, dan bijaksana",
        "Kayu": "kreatif, idealis, dan pekerja keras",
        "Api": "dinamis, passionate, dan berani",
        "Tanah": "stabil, dapat diandalkan, dan praktis"
    };
    return `${elementTraits[element]} dengan sifat dasar ${animal}`;
}

function getElementalStrengths(element, animal) {
    const elementStrengths = {
        "Logam": "Disiplin tinggi, tekad kuat, kepemimpinan",
        "Air": "Adaptabilitas, kebijaksanaan, intuisi",
        "Kayu": "Kreativitas, pertumbuhan, kemandirian",
        "Api": "Antusiasme, karisma, semangat",
        "Tanah": "Stabilitas, keandalan, kesabaran"
    };
    return elementStrengths[element];
}

function getElementalWeaknesses(element, animal) {
    const elementWeaknesses = {
        "Logam": "Kaku, terlalu perfeksionis, sulit berkompromi",
        "Air": "Terlalu mengalir, kurang fokus, mudah terpengaruh",
        "Kayu": "Keras kepala, idealis berlebihan, sulit realistis",
        "Api": "Mudah terbakar emosi, tidak sabaran, dominan",
        "Tanah": "Lambat berubah, konservatif, keras kepala"
    };
    return elementWeaknesses[element];
}

function getLuckyNumbers(element) {
    const elementNumbers = {
        "Logam": "6, 7, 8",
        "Air": "1, 6, 7",
        "Kayu": "3, 4, 9",
        "Api": "2, 7, 9",
        "Tanah": "2, 5, 8"
    };
    return elementNumbers[element];
}

function getElementColors(element) {
    const elementColors = {
        "Logam": "Putih, perak, emas",
        "Air": "Biru, hitam, abu-abu",
        "Kayu": "Hijau, coklat",
        "Api": "Merah, ungu, pink",
        "Tanah": "Kuning, coklat tanah"
    };
    return elementColors[element];
}

function getLuckyDirections(element) {
    const elementDirections = {
        "Logam": "Barat, Barat Laut",
        "Air": "Utara, Timur",
        "Kayu": "Timur, Tenggara",
        "Api": "Selatan, Timur",
        "Tanah": "Timur Laut, Barat Daya"
    };
    return elementDirections[element];
}
    // Fungsi untuk mendapatkan elemen warna Shio
function getChineseElementColor(element) {
    const elementColors = {
        "Kayu": "#4CAF50",
        "Api": "#FF5722",
        "Tanah": "#795548",
        "Logam": "#9E9E9E",
        "Air": "#2196F3",
        "Emas": "#FFD700"
    };
    return elementColors[element];
}
    // Fungsi untuk menghitung waktu menuju ulang tahun berikutnya
function calculateTimeToNextBirthday(birthDate) {
    const now = luxon.DateTime.now();
    let nextBirthday = luxon.DateTime.fromObject({
        year: now.year,
        month: birthDate.month,
        day: birthDate.day
    });

    // Jika ulang tahun tahun ini sudah lewat, gunakan tahun depan
    if (now > nextBirthday) {
        nextBirthday = nextBirthday.plus({ years: 1 });
    }

    const diff = nextBirthday.diff(now, ['months', 'days']);
    const monthsLeft = Math.floor(diff.months);
    const daysLeft = Math.floor(diff.days);

    return {
        months: monthsLeft,
        days: daysLeft
    };
}

// Fungsi untuk memformat pesan waktu menuju ulang tahun
function formatTimeToNextBirthday(months, days) {
    let message = "Menuju ulang tahun berikutnya: ";
    
    if (months > 0) {
        message += `${months} bulan`;
    }
    
    if (days > 0) {
        if (months > 0) message += " dan ";
        message += `${days} hari`;
    }
    
    if (months === 0 && days === 0) {
        message = "Hari ini adalah ulang tahun Anda!";
    }
    
    return message;
}
    // Fungsi untuk mengembalikan kata-kata motivasi acak
function getRandomSeriousMotivationalQuote() {
    const quotes = [
        "Konsistensi adalah kunci menuju kesuksesan.",
        "Fokus pada tujuan, bukan hambatan.",
        "Kerja keras mengalahkan bakat ketika bakat tidak bekerja keras.",
        "Kesuksesan adalah hasil dari persiapan dan kerja keras.",
        "Jangan menyerah, setiap langkah membawa Anda lebih dekat ke tujuan.",
        "Keberhasilan membutuhkan disiplin dan ketekunan.",
        "Hanya mereka yang berani gagal yang bisa mencapai keberhasilan besar.",
        "Waktu adalah aset berharga, gunakan dengan bijak.",
        "Kesabaran dan ketekunan adalah fondasi keberhasilan.",
        "Tetap fokus, hasil akan mengikuti usaha.",    
    "Setiap hari adalah kesempatan untuk menjadi lebih baik.",
    "Keberhasilan dimulai dari langkah kecil.",
    "Percaya pada dirimu, kamu bisa mencapai apa saja!",    
    "Jangan takut gagal, itu bagian dari proses.",
    "Kamu lebih kuat dari yang kamu pikirkan.",
    "Lakukan yang terbaik, dan biarkan sisanya mengalir.",
    "Hidup adalah petualangan, nikmati setiap langkahnya!",
    "Kamu adalah inspirasi bagi dirimu sendiri."

    ];
    return quotes[Math.floor(Math.random() * quotes.length)];
}


    
// First, add html2canvas library to your dependencies in the head section
// Enhanced sharing function
async function shareResult() {
    const resultDiv = document.getElementById("result");
    if (!resultDiv || resultDiv.style.display === "none") return;

    // Show loading indicator
    showLoadingOverlay('Menyiapkan hasil...');

    try {
        // Capture only the relevant parts for sharing
        const years = document.getElementById("years").textContent;
        const months = document.getElementById("months").textContent;
        const days = document.getElementById("days").textContent;
        const birthDate = luxon.DateTime.fromISO(document.getElementById("birthdate").value);
        const timeToNextBirthdayShare = calculateTimeToNextBirthday(birthDate);

        // Create a new canvas for the modern preview (rasio 1:1)
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 400;
        canvas.height = 400; // Pertahankan rasio 1:1

        // Set HiDPI support
        const dpr = window.devicePixelRatio || 1;
        canvas.width = 400 * dpr;
        canvas.height = 400 * dpr;
        canvas.style.width = "400px";
        canvas.style.height = "400px";
        ctx.scale(dpr, dpr);

        // Set background color based on theme (gradient)
        const gradient = ctx.createLinearGradient(0, 0, 400, 400);
        gradient.addColorStop(0, isDarkMode ? '#000000' : '#ffffff'); // Hitam pekat
        gradient.addColorStop(1, isDarkMode ? '#000000' : '#f0f0f0'); // Merah menyala
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, 400, 400);

        // Draw the line art
        drawLineArt(ctx, isDarkMode);

        // Set text color and font
        ctx.fillStyle = isDarkMode ? '#ffffff' : '#000000';
        ctx.font = '700 24px "Poppins", sans-serif'; // Ukuran font tetap
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        // Draw header "-Agecalc-" (posisi paling atas)
        ctx.fillStyle = isDarkMode ? '#ff6b6b' : '#d00000';
        ctx.fillText("agecalc", 200, 28); // Posisi di bagian paling atas (header)

        // Draw subtitle "Sekarang usia kamu:" dengan jarak lumayan dari header
        ctx.fillStyle = isDarkMode ? '#ffffff' : '#000000';   
        ctx.font = '600 16px "Poppins", sans-serif'; // Ukuran font tetap
        ctx.fillText("Sekarang usia kamu:", 200, 60); // Jarak lumayan dari header (dari 50 ke 60)

        // Draw boxes for age information (posisi disesuaikan)
        const boxWidth = 240;
        const boxHeight = 40;
        const boxX = (400 - boxWidth) / 2;
        const boxYStart = 80; // Geser ke atas agar muat (dari 70 ke 80)
        const boxSpacing = 45; // Jarak antar box tetap

        // Box for years
        ctx.shadowColor = isDarkMode ? 'rgba(0, 0, 0, 0.5)' : 'rgba(0, 0, 0, 0.2)';
        ctx.shadowBlur = 10;
        ctx.shadowOffsetX = 4;
        ctx.shadowOffsetY = 4;
        ctx.fillStyle = isDarkMode ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)';
        ctx.beginPath();
        ctx.roundRect(boxX, boxYStart, boxWidth, boxHeight, 8);
        ctx.fill();
        ctx.fillStyle = isDarkMode ? '#ff6b6b' : '#d00000';
        ctx.font = 'bold 20px "Poppins", sans-serif';
        ctx.fillText(`${years}`, boxX + 40, boxYStart + boxHeight / 2);
        ctx.fillStyle = isDarkMode ? '#ffffff' : '#000000';
        ctx.font = '600 18px "Poppins", sans-serif';
        ctx.fillText("Tahun", boxX + 120, boxYStart + boxHeight / 2);

        // Box for months
        ctx.fillStyle = isDarkMode ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)';
        ctx.beginPath();
        ctx.roundRect(boxX, boxYStart + boxSpacing, boxWidth, boxHeight, 8);
        ctx.fill();
        ctx.fillStyle = isDarkMode ? '#ff6b6b' : '#d00000';
        ctx.font = 'bold 20px "Poppins", sans-serif';
        ctx.fillText(`${months}`, boxX + 40, boxYStart + boxSpacing + boxHeight / 2);
        ctx.fillStyle = isDarkMode ? '#ffffff' : '#000000';
        ctx.font = '600 18px "Poppins", sans-serif';
        ctx.fillText("Bulan", boxX + 120, boxYStart + boxSpacing + boxHeight / 2);

        // Box for days
        ctx.fillStyle = isDarkMode ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)';
        ctx.beginPath();
        ctx.roundRect(boxX, boxYStart + 2 * boxSpacing, boxWidth, boxHeight, 8);
        ctx.fill();
        ctx.fillStyle = isDarkMode ? '#ff6b6b' : '#d00000';
        ctx.font = 'bold 20px "Poppins", sans-serif';
        ctx.fillText(`${days}`, boxX + 40, boxYStart + 2 * boxSpacing + boxHeight / 2);
        ctx.fillStyle = isDarkMode ? '#ffffff' : '#000000';
        ctx.font = '600 18px "Poppins", sans-serif';
        ctx.fillText("Hari", boxX + 120, boxYStart + 2 * boxSpacing + boxHeight / 2);

        // Draw title for "Ulang Tahun Berikutnya"
        ctx.fillStyle = isDarkMode ? '#ffffff' : '#000000';
        ctx.font = '600 16px "Poppins", sans-serif';
        ctx.fillText("Ulang Tahun Berikutnya:", 200, boxYStart + 3 * boxSpacing + 10);

        // Box for next birthday months
        ctx.fillStyle = isDarkMode ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)';
        ctx.beginPath();
        ctx.roundRect(boxX, boxYStart + 3 * boxSpacing + 30, boxWidth, boxHeight, 8);
        ctx.fill();
        ctx.fillStyle = isDarkMode ? '#ff6b6b' : '#d00000';
        ctx.font = 'bold 20px "Poppins", sans-serif';
        ctx.fillText(`${timeToNextBirthdayShare.months}`, boxX + 40, boxYStart + 3 * boxSpacing + 30 + boxHeight / 2);
        ctx.fillStyle = isDarkMode ? '#ffffff' : '#000000';
        ctx.font = '600 18px "Poppins", sans-serif';
        ctx.fillText("Bulan", boxX + 120, boxYStart + 3 * boxSpacing + 30 + boxHeight / 2);

        // Box for next birthday days
        ctx.fillStyle = isDarkMode ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)';
        ctx.beginPath();
        ctx.roundRect(boxX, boxYStart + 4 * boxSpacing + 30, boxWidth, boxHeight, 8);
        ctx.fill();
        ctx.fillStyle = isDarkMode ? '#ff6b6b' : '#d00000';
        ctx.font = 'bold 20px "Poppins", sans-serif';
        ctx.fillText(`${timeToNextBirthdayShare.days}`, boxX + 40, boxYStart + 4 * boxSpacing + 30 + boxHeight / 2);
        ctx.fillStyle = isDarkMode ? '#ffffff' : '#000000';
        ctx.font = '600 18px "Poppins", sans-serif';
        ctx.fillText("Hari", boxX + 120, boxYStart + 4 * boxSpacing + 30 + boxHeight / 2);
// Draw random serious motivational quote as footer
const randomQuote = getRandomSeriousMotivationalQuote();
ctx.fillStyle = isDarkMode ? '#ffffff' : '#000000';
ctx.font = 'italic 10px "Courier New", sans-serif'; // Ganti font jadi 10px dan gunakan "Courier New" (atau font lain yang terlihat "irregular")
ctx.fillText(`"${randomQuote}"`, 200, 366);
// Reset shadow
ctx.shadowColor = 'transparent';

        // Reset shadow
        ctx.shadowColor = 'transparent';

        // Convert canvas to blob
        const imageBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));

        // Create sharing data
        const resultText = `${years} tahun, ${months} bulan, ${days} hari\nUlang Tahun Berikutnya: ${timeToNextBirthdayShare.months} bulan, ${timeToNextBirthdayShare.days} hari`;
        const files = [
            new File([imageBlob], 'usia.png', { type: 'image/png' })
        ];

        // Prepare sharing options
        if (navigator.share && navigator.canShare && navigator.canShare({ files })) {
            // Web Share API with files support
            const shareData = {
                title: 'Hasil Kalkulasi Usia',
                text: resultText,
                files: files,
                url: window.location.href
            };

            await navigator.share(shareData);
            showToast('Berhasil membagikan hasil!');
            showConfetti();
        } else if (navigator.share) {
            // Web Share API without files support
            const shareData = {
                title: 'Hasil Kalkulasi Usia',
                text: resultText,
                url: window.location.href
            };

            await navigator.share(shareData);
            showToast('Berhasil membagikan hasil!');
            showConfetti();
        } else {
            // Fallback: Download image and copy text
            const link = document.createElement('a');
            link.href = URL.createObjectURL(imageBlob);
            link.download = 'usia.png';
            link.click();

            await navigator.clipboard.writeText(resultText);
            showToast('Hasil telah disimpan dan disalin ke clipboard!');
            showConfetti();
        }
    } catch (error) {
        console.error('Error sharing:', error);
        showToast('Gagal membagikan hasil. Silakan coba lagi.');
    } finally {
        hideLoadingOverlay();
    }
}
    
function drawLineArt(ctx, isDarkMode) {
    // Set stroke color based on theme
    ctx.strokeStyle = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
    ctx.lineWidth = 1;
    ctx.lineJoin = 'round';
    ctx.lineCap = 'round';

    // X-wing
    ctx.beginPath();
    ctx.moveTo(100, 100);
    ctx.lineTo(150, 100);
    ctx.lineTo(125, 150);
    ctx.lineTo(100, 100);
    ctx.moveTo(125, 125);
    ctx.lineTo(175, 100);
    ctx.moveTo(125, 125);
    ctx.lineTo(75, 100);
    ctx.stroke();

    // Stormtrooper Helmet
    ctx.beginPath();
    ctx.arc(250, 125, 25, 0, Math.PI * 2);
    ctx.moveTo(235, 125);
    ctx.lineTo(265, 125);
    ctx.moveTo(250, 110);
    ctx.lineTo(250, 140);
    ctx.stroke();

    // Planet
    ctx.beginPath();
    ctx.arc(350, 125, 20, 0, Math.PI * 2);
    ctx.stroke();

    // Star
    ctx.beginPath();
    ctx.moveTo(50, 250);
    for (let i = 0; i < 5; i++) {
        ctx.lineTo(50 + 20 * Math.cos(2 * Math.PI * i / 5), 250 + 20 * Math.sin(2 * Math.PI * i / 5));
        ctx.lineTo(50 + 10 * Math.cos(2 * Math.PI * (i + 0.5) / 5), 250 + 10 * Math.sin(2 * Math.PI * (i + 0.5) / 5));
    }
    ctx.closePath();
    ctx.stroke();

    // Rocket
    ctx.beginPath();
    ctx.moveTo(50, 50);
    ctx.lineTo(50, 100);
    ctx.lineTo(40, 110);
    ctx.lineTo(60, 110);
    ctx.lineTo(50, 100);
    ctx.moveTo(50, 50);
    ctx.lineTo(40, 40);
    ctx.lineTo(60, 40);
    ctx.lineTo(50, 50);
    ctx.stroke();

    // Lightsaber
    ctx.beginPath();
    ctx.moveTo(200, 200);
    ctx.lineTo(300, 200);
    ctx.stroke();

    // R2-D2
    ctx.beginPath();
    ctx.arc(300, 300, 20, 0, Math.PI * 2);
    ctx.moveTo(300, 280);
    ctx.lineTo(300, 320);
    ctx.moveTo(280, 300);
    ctx.lineTo(320, 300);
    ctx.stroke();

    // TIE Fighter
    ctx.beginPath();
    ctx.arc(150, 300, 20, 0, Math.PI * 2);
    ctx.moveTo(130, 300);
    ctx.lineTo(170, 300);
    ctx.moveTo(150, 280);
    ctx.lineTo(150, 320);
    ctx.moveTo(150, 300);
    ctx.lineTo(150 - 30, 300 - 30);
    ctx.moveTo(150, 300);
    ctx.lineTo(150 + 30, 300 - 30);
    ctx.stroke();

    // Yoda Head
    ctx.beginPath();
    ctx.arc(250, 300, 25, 0, Math.PI * 2);
    ctx.moveTo(235, 300);
    ctx.bezierCurveTo(230, 290, 240, 280, 250, 280);
    ctx.bezierCurveTo(260, 280, 270, 290, 265, 300);
    ctx.stroke();

    // More stars for background
    for (let i = 0; i < 50; i++) {
        let x = Math.random() * 400;
        let y = Math.random() * 400;
        let size = Math.random() * 5 + 2;
        ctx.beginPath();
        ctx.arc(x, y, size, 0, Math.PI * 2);
        ctx.stroke();
    }

    // Add more elements here as needed, following the same pattern
}

    
       

        function showLoadingOverlay(message) {
    const overlay = document.createElement('div');
    overlay.className = 'sharing-overlay';
    overlay.innerHTML = `
        <div class="sharing-loader">
            <div class="sharing-spinner"></div>
            <div class="sharing-message">${message}</div>
        </div>
    `;
    document.body.appendChild(overlay);
}

function hideLoadingOverlay() {
    const overlay = document.querySelector('.sharing-overlay');
    if (overlay) {
        overlay.classList.add('fade-out');
        setTimeout(() => overlay.remove(), 500);
    }
}

// Enhanced toast notification with animation
function showToast(message) {
    const toast = document.createElement('div');
    toast.className = 'toast animated';
    
    // Add icon based on message type
    const icon = message.includes('Berhasil') ? '✅' : message.includes('Gagal') ? '❌' : 'ℹ️';
    
    toast.innerHTML = `
        <div class="toast-content">
            <span class="toast-icon">${icon}</span>
            <span class="toast-message">${message}</span>
        </div>
    `;
    
    document.body.appendChild(toast);

    // Trigger animations
    requestAnimationFrame(() => {
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.add('hide');
            setTimeout(() => toast.remove(), 300);
        }, 3000);
    });
}

   </script>
</body>
</html>